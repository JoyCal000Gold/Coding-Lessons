Please Continue Working in GitHub Codespaces once you access the terminal through clicking the 3 bars at the top left corner.

# --- 1. Install Quarto temporarily (will disappear after Codespace shutdown) ---
wget https://github.com/quarto-dev/quarto-cli/releases/download/v1.3.313/quarto-1.3.313-linux-amd64.deb
sudo dpkg -i quarto-1.3.313-linux-amd64.deb

# Check Quarto installation
quarto --version

# --- 2. Download and install Miniconda ---
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh

# Follow installer prompts (accept license, choose install path, etc.)
# After installation, reload your shell environment:
source ~/.bashrc

# --- 3. Install R (version >= 4.4) and required R packages from conda-forge ---
conda install -c conda-forge r-base=4.4 r-essentials r-reticulate r-matrix -y

# Check R version
R --version

# --- 4. Set up user R package library directory ---
mkdir -p ~/Rlibs
chmod u+rwx ~/Rlibs

# Add user library path permanently
echo 'R_LIBS_USER="~/Rlibs"' >> ~/.Renviron
source ~/.Renviron

# --- 5. Verify R user library is set correctly ---
R -e 'cat(Sys.getenv("R_LIBS_USER"), "\n"); .libPaths()'

# --- 6. Install additional R packages in user library if needed ---
R -e 'install.packages(c("knitr", "rmarkdown", "xfun"), repos="https://cloud.r-project.org", lib=Sys.getenv("R_LIBS_USER"))'

# --- 7. Install system dependencies for R graphics and X11 support ---
sudo apt update
sudo apt install -y libx11-dev libxt-dev libxt6 build-essential

# --- 8. Install Rust via rustup ---
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
source $HOME/.cargo/env

# Check Rust and Cargo versions
rustc --version
cargo --version

# --- 9. Install C++ compiler (g++) ---
sudo apt install -y build-essential g++

# Verify g++ installation
g++ --version

# --- 10. Confirm rustc and g++ are on PATH ---
which rustc
which g++

# --- 11. Check Python installation ---
python3 --version

# --- 12. (In R) Set Python path for reticulate ---
# IMPORTANT: Run this inside R, not terminal
# Replace /usr/bin/python3 with your python path from `which python3`

echo '
library(reticulate)
use_python("/usr/bin/python3", required = TRUE)
' > set_python.R

Rscript set_python.R

# --- 13. Render your Quarto document ---
quarto render "Lesson-One.qmd"

# --- 14. (Optional) Preview your HTML in Codespaces ---
# Right-click Lesson-One.html in Explorer and select "Open with Preview"
